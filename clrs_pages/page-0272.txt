Problems for Chapter 10                                                            251


turn. The search terminates once the index i “falls off” the end of the list or once
keyŒi  k. In the latter case, if keyŒi D k, clearly we have found a key with the
value k. If, however, keyŒi > k, then we will never ﬁnd a key with the value k,
and so terminating the search was the right thing to do.
   Lines 3–7 attempt to skip ahead to a randomly chosen position j . Such a skip
beneﬁts us if keyŒj  is larger than keyŒi and no larger than k; in such a case, j
marks a position in the list that i would have to reach during an ordinary list search.
Because the list is compact, we know that any choice of j between 1 and n indexes
some object in the list rather than a slot on the free list.
   Instead of analyzing the performance of C OMPACT-L IST-S EARCH directly, we
shall analyze a related algorithm, C OMPACT-L IST-S EARCH 0 , which executes two
separate loops. This algorithm takes an additional parameter t which determines
an upper bound on the number of iterations of the ﬁrst loop.

C OMPACT-L IST-S EARCH0 .L; n; k; t/
 1 i DL
 2 for q D 1 to t
 3      j D R ANDOM.1; n/
 4      if keyŒi < keyŒj  and keyŒj   k
 5           i Dj
 6           if keyŒi == k
 7                return i
 8 while i ¤ NIL and keyŒi < k
 9      i D nextŒi
10 if i == NIL or keyŒi > k
11      return NIL
12 else return i

To compare the execution of the algorithms C OMPACT-L IST-S EARCH .L; n; k/
and C OMPACT-L IST-S EARCH 0 .L; n; k; t/, assume that the sequence of integers re-
turned by the calls of R ANDOM.1; n/ is the same for both algorithms.

a. Suppose that C OMPACT-L IST-S EARCH .L; n; k/ takes t iterations of the while
   loop of lines 2–8. Argue that C OMPACT-L IST-S EARCH 0 .L; n; k; t/ returns the
   same answer and that the total number of iterations of both the for and while
   loops within C OMPACT-L IST-S EARCH 0 is at least t.

In the call C OMPACT-L IST-S EARCH 0 .L; n; k; t/, let X t be the random variable that
describes the distance in the linked list (that is, through the chain of next pointers)
from position i to the desired key k after t iterations of the for loop of lines 2–7
have occurred.
