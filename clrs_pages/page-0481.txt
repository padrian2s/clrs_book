460   Chapter 17 Amortized Analysis


      In practice, we do not always know how many operations might be performed.
      Therefore, if we require that ˆ.Di /  ˆ.D0 / for all i, then we guarantee, as in
      the accounting method, that we pay in advance. We usually just deﬁne ˆ.D0 / to
      be 0 and then show that ˆ.Di /  0 for all i. (See Exercise 17.3-1 for an easy way
      to handle cases in which ˆ.D0 / ¤ 0.)
         Intuitively, if the potential difference ˆ.Di /  ˆ.Di 1 / of the ith operation is
      positive, then the amortized cost cyi represents an overcharge to the ith operation,
      and the potential of the data structure increases. If the potential difference is neg-
      ative, then the amortized cost represents an undercharge to the ith operation, and
      the decrease in the potential pays for the actual cost of the operation.
         The amortized costs deﬁned by equations (17.2) and (17.3) depend on the choice
      of the potential function ˆ. Different potential functions may yield different amor-
      tized costs yet still be upper bounds on the actual costs. We often ﬁnd trade-offs
      that we can make in choosing a potential function; the best potential function to
      use depends on the desired time bounds.

      Stack operations
      To illustrate the potential method, we return once again to the example of the stack
      operations P USH, P OP, and M ULTIPOP. We deﬁne the potential function ˆ on a
      stack to be the number of objects in the stack. For the empty stack D0 with which
      we start, we have ˆ.D0 / D 0. Since the number of objects in the stack is never
      negative, the stack Di that results after the ith operation has nonnegative potential,
      and thus
      ˆ.Di /  0
             D ˆ.D0 / :
      The total amortized cost of n operations with respect to ˆ therefore represents an
      upper bound on the actual cost.
         Let us now compute the amortized costs of the various stack operations. If the ith
      operation on a stack containing s objects is a P USH operation, then the potential
      difference is
      ˆ.Di /  ˆ.Di 1 / D .s C 1/  s
                         D 1:
      By equation (17.2), the amortized cost of this P USH operation is
      cyi   D ci C ˆ.Di /  ˆ.Di 1 /
            D 1C1
            D 2:
